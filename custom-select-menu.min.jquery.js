(function(e){"use strict";e.fn.customSelectMenu=function(t){function r(t){var r=t.parent().attr("data-select-name"),i=t.attr("data-option-value"),s=t.text(),o=e('input[name="'+r+'"]');t.parent().find("."+n.selectedClass).removeClass(n.selectedClass);t.addClass(n.selectedClass);o.val(i);t.parent().parent().find("label").text(s);if(o.val()!==""){t.parent().parent().find("label").addClass(n.selectionMadeClass)}else{t.parent().parent().find("label").removeClass(n.selectionMadeClass)}t.parent().hide();if(t.parent().css("display")!=="none"){t.parent().parent().find("label").toggleClass(n.openedClass)}else{t.parent().parent().find("label").removeClass(n.openedClass)}}var n=e.extend({menuClass:"custom-select-menu",openedClass:"opened",selectedClass:"selected",selectionMadeClass:"selection-made"},t);return this.each(function(){var t=e(this),i=t.attr("name"),s=t.attr("id"),o,u,a,f,l,c,h,p;t.hide();u=e('<div class="'+n.menuClass+'">').attr("tabindex",0);if(s){u.attr("id",s);t.removeAttr("id")}if(t.find(":selected")){h=t.find(":selected");p=h.attr("value");f=h.text();if(!p){a=e("<label>"+f+"</label>")}else{a=e('<label class="'+n.selectionMadeClass+'">'+f+"</label>");o.val(p)}}else{f=t.find(":first").text();a=e("<label>"+f+"</label>")}l=e('<ul data-select-name="'+i+'">').hide();o=e('<input type="hidden" name="'+i+'" value="" />');t.after(u.append(a,l,o));t.find("option").each(function(){var t=e(this).text(),r=e(this).attr("value"),i=t===f?' class="'+n.selectedClass+'"':"";if(!r){c=e("<li"+i+">"+t+"</li>")}else{c=e('<li data-option-value="'+r+'"'+i+">"+t+"</li>")}l.append(c)});u.on("click",function(t){var i=e(t.target);if(i.is("label")){a.toggleClass(n.openedClass);a.parent().find("ul").toggle()}if(i.is("li")){r(i)}});u.on("keyup",function(t){if(t.keyCode===38||t.keyCode===40){e(this).find(a).addClass(n.openedClass);e(this).find(l).show()}var i=e(this).find("li"),s=e(this).find("."+n.selectedClass),o="",u="";if(t.keyCode===40){s.removeClass(n.selectedClass);o=s.next();if(o.length>0){o.addClass(n.selectedClass)}else{i.first().addClass(n.selectedClass)}}if(t.keyCode===38){s.removeClass(n.selectedClass);u=s.prev();if(u.length>0){u.addClass(n.selectedClass)}else{i.last().addClass(n.selectedClass)}}if(t.keyCode===13){r(e(this).find("."+n.selectedClass))}});u.on("blur",function(){if(e(this).find(l).is(":visible")){e(this).find(a).removeClass(n.openedClass);e(this).find(l).hide()}});e("html").on("keyup",function(e){if(e.keyCode===27){a.removeClass(n.openedClass);l.hide()}});e("html").on("mousedown",function(t){var r=e(t.target);if(!r.parents().addBack().is("."+n.menuClass+" ul, ."+n.menuClass+" label")){e("."+n.menuClass+" label").removeClass(n.openedClass);e("."+n.menuClass+" ul").hide()}})})}})(jQuery)